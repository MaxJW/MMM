(function($){$.fn.coinMarketCap=function(options){var defaults={BitcoinPriceTarget:null,BitcoinPercentChangeTarget:null,BitcoinIconTarget:null,BitcoinGraphTarget:null,LitecoinPriceTarget:null,LitecoinPercentChangeTarget:null,LitecoinIconTarget:null,LitecoinGraphTarget:null,EthereumPriceTarget:null,EthereumPercentChangeTarget:null,EthereumIconTarget:null,EthereumGraphTarget:null,BATPriceTarget:null,BATPercentChangeTarget:null,BATIconTarget:null,BATGraphTarget:null,apiKey:null,apiurl:'https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?convert=GBP&id=1,2,1027,1697',success:function(){},error:function(message){}}
var plugin=this;var el=$(this);plugin.settings={}
plugin.settings=$.extend({},defaults,options);var s=plugin.settings;var formatPercent=function(coin,num){var result;if(num>=0){$(coin).addClass('positive');result='+'+num+'%'}else{$(coin).addClass('negative');result=num+'%'}
return result}
var getCoinData=function(){$.ajax({url:s.apiurl,headers:{'X-CMC_PRO_API_KEY':s.apiKey},success:function(response){console.log(response);$(s.BitcoinPriceTarget).text('£'+(response.data[1].quote.GBP.price).toFixed(2));$(s.BitcoinPercentChangeTarget).text(formatPercent(s.BitcoinPercentChangeTarget,(response.data[1].quote.GBP.percent_change_24h).toFixed(2)));$(s.BitcoinIconTarget).attr('src','https://s2.coinmarketcap.com/static/img/coins/32x32/1.png');$(s.BitcoinGraphTarget).attr('src','https://s2.coinmarketcap.com/generated/sparklines/web/1d/usd/1.png');$(s.LitecoinPriceTarget).text('£'+(response.data[2].quote.GBP.price).toFixed(2));$(s.LitecoinPercentChangeTarget).text(formatPercent(s.LitecoinPercentChangeTarget,(response.data[2].quote.GBP.percent_change_24h).toFixed(2)));$(s.LitecoinIconTarget).attr('src','https://s2.coinmarketcap.com/static/img/coins/32x32/2.png');$(s.LitecoinGraphTarget).attr('src','https://s2.coinmarketcap.com/generated/sparklines/web/1d/usd/2.png');$(s.EthereumPriceTarget).text('£'+(response.data[1027].quote.GBP.price).toFixed(2));$(s.EthereumPercentChangeTarget).text(formatPercent(s.EthereumPercentChangeTarget,(response.data[1027].quote.GBP.percent_change_24h).toFixed(2)));$(s.EthereumIconTarget).attr('src','https://s2.coinmarketcap.com/static/img/coins/32x32/1027.png');$(s.EthereumGraphTarget).attr('src','https://s2.coinmarketcap.com/generated/sparklines/web/1d/usd/1027.png');$(s.BATPriceTarget).text('£'+(response.data[1697].quote.GBP.price).toFixed(2));$(s.BATPercentChangeTarget).text(formatPercent(s.BATPercentChangeTarget,(response.data[1697].quote.GBP.percent_change_24h).toFixed(2)));$(s.BATIconTarget).attr('src','https://s2.coinmarketcap.com/static/img/coins/32x32/1697.png');$(s.BATGraphTarget).attr('src','https://s2.coinmarketcap.com/generated/sparklines/web/1d/usd/1697.png')},error:function(response){console.log("coinmarket error")}})}
getCoinData()}})(jQuery)